# å¢å¼ºåŠŸèƒ½

## 1. NAT ç±»å‹æ£€æµ‹

ä½¿ç”¨ STUN æœåŠ¡å™¨æ£€æµ‹ NAT ç±»å‹ï¼š
```bash
./npc nat -stun_addr=stun.stunprotocol.org:3478
```
å¦‚æœ **P2P åŒæ–¹éƒ½æ˜¯ `Symmetric NAT`** ï¼Œåˆ™ **æ— æ³•ç©¿é€**ï¼Œå…¶ä»– NAT ç»„åˆé€šå¸¸å¯ä»¥æˆåŠŸã€‚

ğŸ“Œ **å¯é€‰å‚æ•°**

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|
| `-stun_addr` | æŒ‡å®š STUN æœåŠ¡å™¨åœ°å€ | `stun.stunprotocol.org:3478` |

---

## 2. çŠ¶æ€æ£€æŸ¥

æ£€æŸ¥ NPC å®¢æˆ·ç«¯çš„è¿è¡ŒçŠ¶æ€ï¼š
```bash
./npc status -config=/path/to/npc.conf
```
ğŸ“Œ **å¯é€‰å‚æ•°**

| å‚æ•° | è¯´æ˜ |
|------|------|
| `-config` | æŒ‡å®š NPC é…ç½®æ–‡ä»¶è·¯å¾„ |

---

## 3. é‡è½½é…ç½®æ–‡ä»¶

é‡æ–°åŠ è½½ NPC å®¢æˆ·ç«¯é…ç½®ï¼Œè€Œæ— éœ€é‡å¯è¿›ç¨‹ï¼š
```bash
./npc restart -config=/path/to/npc.conf
```
ğŸ“Œ **å¯é€‰å‚æ•°**

| å‚æ•° | è¯´æ˜ |
|------|------|
| `-config` | æŒ‡å®š NPC é…ç½®æ–‡ä»¶è·¯å¾„ |

---

## 4. é€šè¿‡ä»£ç†è¿æ¥ NPS

å¦‚æœ NPC è¿è¡Œçš„æœºå™¨æ— æ³•ç›´æ¥è®¿é—®å¤–ç½‘ï¼Œå¯ä»¥é€šè¿‡ **Socks5 / HTTP ä»£ç†** è¿æ¥ NPS æœåŠ¡å™¨ã€‚

### **4.1 é…ç½®æ–‡ä»¶æ–¹å¼**
åœ¨ `npc.conf` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```ini
[common]
proxy_url=socks5://111:222@127.0.0.1:8024
```

### **4.2 å‘½ä»¤è¡Œæ–¹å¼**
```bash
./npc -server=xxx:123 -vkey=xxx -proxy=socks5://111:222@127.0.0.1:8024
```

ğŸ“Œ **æ”¯æŒä»£ç†åè®®**

| ä»£ç†ç±»å‹ | ç¤ºä¾‹æ ¼å¼ |
|---------|----------|
| **Socks5** | `socks5://username:password@ip:port` |
| **HTTP** | `http://username:password@ip:port` |

---

## 5. å…¶ä»–å‘½ä»¤è¡Œå‚æ•°
ğŸ“Œ **æ‰€æœ‰å‚æ•°å¯ä¸å¯åŠ¨å‘½ä»¤ç»„åˆä½¿ç”¨** ï¼š

```bash
./npc -server=xxx:123,yyy:456 -vkey=xxx,yyy -type=tls,tcp -log=off -debug=false
```

| å‚æ•°                    | è¯´æ˜                                         | é»˜è®¤å€¼ |
|-----------------------|--------------------------------------------|------|
| `-server`             | æŒ‡å®š NPS æœåŠ¡å™¨åœ°å€ï¼ˆ`ip:port`ï¼‰                    | æ—  |
| `-vkey`               | å®¢æˆ·ç«¯è®¤è¯å¯†é’¥                                    | æ—  |
| `-config`             | æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„                                   | æ—  |
| `-proxy`              | é€šè¿‡ä»£ç†è¿æ¥ NPSï¼ˆæ”¯æŒ Socks5 / HTTPï¼‰               | æ—  |
| `-debug`              | æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼                                   | `true` |
| `-log`                | æ—¥å¿—è¾“å‡ºæ¨¡å¼ï¼ˆ`stdout` / `file` / `both` / `off`ï¼‰ | `file` |
| `-log_path`           | NPC æ—¥å¿—è·¯å¾„ï¼ˆä¸ºç©ºä½¿ç”¨é»˜è®¤è·¯å¾„ï¼Œ`off` ç¦ç”¨æ—¥å¿—ï¼‰              | `npc.log` |
| `-log_level`          | æ—¥å¿—çº§åˆ«ï¼ˆ0-7ï¼‰                                  | `7` |
| `-log_compress`       | æ˜¯å¦å¯ç”¨æ—¥å¿—å‹ç¼©                                   | `false` |
| `-log_max_days`       | æ—¥å¿—æœ€å¤§ä¿ç•™å¤©æ•°ï¼ˆ0 å…³é—­ï¼‰                             | `7` |
| `-log_max_files`      | æœ€å¤§æ—¥å¿—æ–‡ä»¶æ•°ï¼ˆ0 å…³é—­ï¼‰                              | `10` |
| `-log_max_size`       | å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰                             | `5` |
| `-disconnect_timeout` | è¿æ¥è¶…æ—¶ç§’æ•°                                     | `60` |
| `-pprof`              | å¯ç”¨ PProf è°ƒè¯•ï¼ˆæ ¼å¼ `ip:port`ï¼‰                  | æ—  |
| `-local_type`         | P2P ç›®æ ‡ç±»å‹                                   | `p2p` |
| `-local_port`         | P2P æœ¬åœ°ç«¯å£                                   | `2000` |
| `-password`           | P2P è®¤è¯å¯†ç                                    | æ—  |
| `-stun_addr`          | STUN æœåŠ¡å™¨åœ°å€                                 | `stun.stunprotocol.org:3478` |
| `-dns_server`         | é…ç½® DNS æœåŠ¡å™¨                                 | `8.8.8.8` |
| `-time`               | å®¢æˆ·ç«¯æ³¨å†Œæ—¶é—´ï¼ˆå°æ—¶ï¼‰                                | `2` |
| `-type`               | æœåŠ¡å™¨è¿æ¥æ–¹å¼ï¼ˆ`tcp` / `tls` / `kcp`ï¼‰             | `tcp` |
| `-version`            | æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬                                     | æ—  |

---

## 6. ç¾¤æ™–æ”¯æŒ

ğŸ“Œ **æ¨èä½¿ç”¨ Docker éƒ¨ç½²**
```bash
docker pull duan2001/npc
docker run -d --restart=always --name npc --net=host duan2001/npc -server=xxx:123,yyy:456 -vkey=xxx,yyy -type=tls,tcp -log=off
```
~~æ›¾æä¾› `.spk` ç¾¤æ™–å¥—ä»¶ï¼Œä½†å·²ä¸å†ç»´æŠ¤ï¼Œå»ºè®®ä½¿ç”¨ Docker æ–¹å¼è¿è¡Œã€‚~~ 
âœ…[Telegram](https://t.me/npsdev) å†…æœ‰ç¬¬ä¸‰æ–¹æä¾›çš„ç¾¤æ™–å¥—ä»¶ã€‚

---

âœ… **å¦‚éœ€æ›´å¤šå¸®åŠ©ï¼Œè¯·æŸ¥çœ‹ [æ–‡æ¡£](https://github.com/djylb/nps) æˆ–æäº¤ [GitHub Issues](https://github.com/djylb/nps/issues) åé¦ˆé—®é¢˜ã€‚**